<!doctype html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Create Instruction - XML</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	</head>

	<body>
		<input type="button" class="btn btn-primary" id="btnCreateInstructionXml" value="Create Instruction (Xml)"></input>
		<br/>
		<textarea style="width:100%;height:200px;" id="exc"></textarea>

		<script type="text/javascript">
		$("#btnCreateInstructionXml").on("click", function () {
			var model = `<instruction>
                            <instruction_info>
                                <scheme_id>46</scheme_id>
                                <repairer_id>49</repairer_id>
                                <team_id>1028</team_id>
                            </instruction_info>
							<policy_holder>
								<address_1>Bhaktapur</address_1>
								<address_2>address2</address_2>
								<city>Bhaktapur</city>
								<courtesy_car_required>true</courtesy_car_required>
								<courtesy_car_supplier>1</courtesy_car_supplier>
								<email_address>abc@test.com</email_address>
								<excess>200.0</excess>
								<full_name>Deepak Chaudhary</full_name>
								<post_code>12345</post_code>
								<telephone_number>9862155791</telephone_number>
								<vat_rate>20.0</vat_rate>
								<vat_registered>false</vat_registered>
							</policy_holder>
							<about_vehicle>
								<address_1>Bhaktapur</address_1>
								<address_2>address2</address_2>
								<city>Bhaktapur</city>
								<has_same_address>true</has_same_address>
								<make>Renault</make>
								<model>Kwid</model>
								<post_code>17789</post_code>
								<registration_number>7891</registration_number>
								<vehicle_collection>true</vehicle_collection>
							</about_vehicle>
							<about_claim>
								<accident_circumstances>Blank</accident_circumstances>
								<accident_date>2018-09-07</accident_date>
								<additional_information>Blank</additional_information>
								<claim_ref>07_19_2018_1</claim_ref>
								<claim_ref_1>claim ref 1</claim_ref_1>
								<claim_ref_2>claim ref 2</claim_ref_2>
								<comment>Blank</comment>
								<condition>1</condition>
								<severity>0</severity>
								<status_category>0</status_category>
								<type_of_damage>0</type_of_damage>
								<inform_to>
									<inform_to_org>
										<organisation_id>DAC_Cus2</organisation_id>
									</inform_to_org>
									<inform_to_org>
										<organisation_id>11234</organisation_id>
									</inform_to_org>
								</inform_to>
							</about_claim>
						</instruction>`;

			$.ajax({
                    url: "http://localhost:44370/api/Instruction/create",
                    type: "POST",
					beforeSend: function (xhr) {
						xhr.setRequestHeader("Content-Type", "application/xml");
						xhr.setRequestHeader("Accept", "application/xml");
						xhr.setRequestHeader("email", "info@neworg.com");
						xhr.setRequestHeader("password", "Abcd1#");
					},
                    data: model,
                    contentType: "application/xml",
                    dataType: 'text',
                data: model,
                error: function (err) {
                    console.log("AJAX error in request: " + JSON.stringify(err, null, 2));
                },
                success: function (result) {
                    $("#exc").val(result).show();
                }
			});
        });
		</script>
	</body>
</html>